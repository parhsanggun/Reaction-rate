<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	<title>My Parse App</title>
	<meta name="description" content="My Parse App">
	<meta name="viewport" content="width=device-width">

	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>

	<script type="text/javascript" src="https://npmcdn.com/parse@2.1.0/dist/parse.js"></script>
</head>
<body>
	<div id="login">
		<p> id : <input type="text" id="id"> </p>
		<p> pw : <input type="text" id="password"> </p>
		<p> email : <input type="text" id="email"> </p>
		<input type="button" value="SIGNUP" onclick="signup()">
	</div>
	<script type="text/javascript">
		Parse.initialize("madcage42");
		Parse.serverURL='https://madcage273.herokuapp.com/parse'

		function signup(){
			var id = $("#id").val();
			var password = $("#password").val();
			var email = $("#email").val();
			var user = new Parse.User();

			if(Parse.User.current()){
				Parse.User.logOut();
			}

			if(id && password && email){
				var zero = 0;
				user.set("username", id);
				user.set("password", password);
				user.set("email", email);
				user.set("score",zero);

				user.signUp()
				.then((user)=> {
					alert("SignUp Success");
					window.location = "signin.html"
				},(error)=> {
					alert("SignUp Error : " + error.message);
				});
			}
			else {
				alert("wrong data");
			}
		}
	</script>
</body>
</html>